
.EQU KEYBOARD_STATUS, $000
.EQU KEYBOARD_DATA, $001
.EQU	STORAGE, $D00
.EQU	@, $050
STOP_WORD:	.CHAR 'get pwned', STR_LEN
MAININDEX:	.WORD
SECONDINDEX:	.WORD $000
ORIGINALINDEX:	.WORD
LDX#	$000

POLL_KEYBD:	INB 	KEYBOARD_STATUS
JGE 	POLL_KEYBD
INB 	KEYBOARD_DATA
ADX# 	$001
STA+ 	STORAGE
STX	ORIGINALINDEX
SBX	$009

LOOPPART:	LDA+	STORAGE
STX	MAININDEX
LDX	SECONDINDEX
CMA+ 	STOP_WORD
JNE	CLEANUP
CMX	STR_LEN
JEQ	END
LOOPPART2:	ADX#	$001
LDX	MAININDEX
ADX#	$001
JMP	LOOPPART

CLEANUP:	LDX#	$000
STX	SECONDINDEX
LDX	ORIGINALINDEX
JMP	POLL_KEYBD

END:	HLT
